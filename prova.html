<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Avvia Conversazione</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    button {
      padding: 14px 28px;
      font-size: 16px;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background: #1e40af;
    }
  </style>
</head>
<body>

  <!-- Pulsante per avviare la conversazione -->
  <button id="connectBtn">ðŸŽ¤ Avvia Conversazione</button>

  <!-- Qui potresti inserire un'immagine o un video -->
  <div id="content" style="margin-top: 20px; text-align: center;">
    <img id="agentImg" src="https://via.placeholder.com/300x200" alt="Agent" style="display:none; border-radius:12px;">
    <video id="agentVideo" width="300" controls style="display:none; border-radius:12px;">
      <source src="your-video.mp4" type="video/mp4">
    </video>
  </div>

  <script>
    document.getElementById("connectBtn").addEventListener("click", async () => {
      try {
        // Chiamata al tuo endpoint (modifica URL!)
        const response = await fetch("https://tuo-dominio/api/connection-details", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            userName: "Dr. John A. Zoidberg",
            agentId: "agentId_1234567",
            userId: "userId_123456789"
          })
        });
        const data = await response.json();
        console.log("Connection details:", data);

        // Qui puoi mostrare immagine o video al posto del pulsante
        document.getElementById("connectBtn").style.display = "none";
        document.getElementById("agentImg").style.display = "block";
        // oppure:
        // document.getElementById("agentVideo").style.display = "block";

        // Se devi integrare con LiveKit Web SDK qui puoi avviare la connessione
        const room = new Room();
        await room.connect(data.serverUrl, data.participantToken);

      } catch (err) {
        console.error("Errore connessione:", err);
        alert("Errore durante la connessione all'agent.");
      }
    });
  </script>
</body>
</html>
